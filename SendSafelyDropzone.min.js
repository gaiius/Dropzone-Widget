function SendSafelyDropzone(e,t,i){this.url="https://app.sendsafely.com",this.INJECTED_TEXT="\n\nThis ticket contains files uploaded using SendSafely. To view the attachments go to the below link:\n {url}",this.BACKGROUND_COLOR="#ffffff",this.DROP_TEXT_COLOR="#D1D1D1",this.WIDTH="100%",this.iframeStartSize=130,this.apiKey=e,this.disableAutoSubmit=!1,this.hasUploadedFiles=!1,this.nbrOfFilesAttached=0,this.dropZone=void 0;var a=this;this.initialize=function(){t.attr("style",""),t.removeClass(),a.createIFrameElement(t),a.iframe.onload=function(){var e=a.iframe.contentWindow,t=a.createStaticURL(a.url);e.postMessage({command:"api-key",key:a.apiKey,color:a.BACKGROUND_COLOR,textColor:a.DROP_TEXT_COLOR},t),a.addFrameListener("file-attached",function(){a.iframeStartSize+=23,a.iframe.style.height=a.iframeStartSize+"px",a.nbrOfFilesAttached++}),a.addFrameListener("file-removed",function(){a.iframeStartSize-=23,a.iframe.style.height=a.iframeStartSize+"px",a.nbrOfFilesAttached--})},a.disableAutoSubmit!==!0&&a.nbrOfFilesAttached>0&&$("form").submit(function(e){var t=$(this);a.finalizePackage(function(e,r){if(void 0===e){var n=a.INJECTED_TEXT;n=n.replace("{url}",r),i.val(function(e,t){return t+n}),t.submit()}else alert(r)}),e.preventDefault()})},this.createStaticURL=function(e){return e.indexOf("https://static-")<0&&e.indexOf("https://")>=0?e=e.replace("https://","https://static-"):e.indexOf("http://static-")<0&&e.indexOf("http://")>=0&&(e=e.replace("http://","http://static-")),e},this.finalizePackage=function(e){a.addFrameListener("package-link",function(t){e(t.url)});var t=a.iframe.contentWindow;t.postMessage({command:"finalize"},a.createStaticURL(a.url))},this.addFrameListener=function(e,t){function i(i){i.data.command==e&&t(i.data)}window.addEventListener?addEventListener("message",i,!1):attachEvent("onmessage",i)},this.createIFrameElement=function(e){iframe=document.createElement("IFRAME"),iframe.setAttribute("src",a.createStaticURL(a.url)+"/html/dropzone.html"),iframe.style.width=a.WIDTH,iframe.style.height=a.iframeStartSize+"px",iframe.style.border="none",iframe.seamless="seamless",iframe.frameBorder="0px",iframe.scrolling="no",e.html(iframe),a.iframe=iframe}}